---
date: 2017-08-12 09:28
status: public
title: const引用的神奇作用
---

## const引用
1. 一般"const"作用：
    * 保证原变量不修改。
    * 作为函数参数时，保证能够传入常量，等。
2. 作为函数参数时，能够传入临时变量（右值等）。（避免传值而多一层拷贝）
3. 作为临时变量的引用，起到保存其值，使其不被马上析构的作用。（避免新建另一个局部变量并拷贝）
4. **（[网上有这个说法](http://developer.51cto.com/art/201002/183476.htm)，但是在VS、Linux-gcc上验证失败）**作为函数返回值时，能够返回函数局部变量、临时变量（右值等）。（避免传值而多一层拷贝）

## decltype
1. `decltype(fun())`：返回函数的返回类型。
1. `decltype(Var)`：返回Var类型（包括const和引用）。
2. `decltype(Expr)`：Expr为右值时返回其类型，Expr为左值时返回其引用。（注：`(Var)`是表达式，且是左值）

## auto
1. 初始值为引用时，使用引用对象的值。
2. auto一般忽略顶层const，保留底层const。
3. 设置引用类型，需明确指出。`auto &`保留顶层const。

## 全局变量
1. 全局外部变量
    * 一处定义，多处声明。
    * 头文件声明，各模块包含。一个定义文件定义。
    
    > 声明定义方式，哪种形式算声明或定义。
2. 全局静态变量
    * 各模块各自定义
3. 全局常量
    * 不加extern默认为全局静态。
    * **全局常量不是常量表达式，但又想多文件共享时，不管定义声明都加extern。**

## 


